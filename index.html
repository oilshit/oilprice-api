<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>oilprice API rendering</title>
  </head>

  <style>
    @import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap");

    body {
      font-family: "Inter", Arial, Helvetica, sans-serif;
    }

    .price-element {
      padding: 10px;
      background-color: #ffe03a;
      border-radius: 10px;
      width: 300px;
      align-self: flex-start;
      margin-bottom: 10px;
    }

    .date * {
      display: block;
    }
  </style>

  <body>
    <div id="demo"></div>

    <script>
      const demo = document.querySelector("#demo");

      const dayOfWeeks = [
        "Sunday",
        "Monday",
        "Tuesday",
        "Wednesday",
        "Thursday",
        "Friday",
        "Saturday",
      ];
      const months = [
        "January",
        "February",
        "March",
        "April",
        "May",
        "June",
        "July",
        "August",
        "September",
        "October",
        "November",
        "December",
      ];

      // index mapping

      // const index = {
      //   "45": "WTI CRUDE OIL",
      //   "46": "BRENT CRUDE OIL",
      //   "47": "MARS US",
      //   "48": "NATURAL GAS"
      //   "50": ""
      // };

      const renderEachOilData = (data) => {
        const date = new Date(data[1].time * 1000);
        return `
          <div class="price-element">
            <div class="date">
              <span>${dayOfWeeks[date.getDay()]}, ${date.getDate()} ${
          months[date.getMonth()]
        } ${date.getFullYear()}<span>
              <span>${("0" + date.getHours()).slice(-2)}:${(
          "0" + date.getMinutes()
        ).slice(-2)}</span>
            </div>

            <span>$ ${data[1].price.toFixed(3)}</span>
            <span>$ ${data[1].change.toFixed(3)}</span>
            <span>$ ${data[1].change.toFixed(3)}</span>
          </div>
        `;
      };

      const renderOilPrice = async () => {
        const oilPriceData = await fetch(
          "https://s3.amazonaws.com/oilprice.com/widgets/oilprices/all/last.json"
        )
          .then((response) => response.json())
          .then((data) => {
            // console.log(data);
            return Object.entries(data);
          });

        oilPriceData.forEach((price) => {
          console.log(price);
          demo.innerHTML += renderEachOilData(price);
        });
      };

      document.addEventListener("DOMContentLoaded", renderOilPrice);
    </script>
  </body>
</html>
